function calcParallax(e){return porcentaje=100*(posY-e.offsetTop+screenY)/(e.offsetHeight+screenY),0>porcentaje?porcentaje=0:porcentaje>100&&(porcentaje=100),Math.round(e.diferencia*(porcentaje-50)/100*100)/100}var debounce=function(e,o){var t;return function(){var n=this,i=arguments,c=function(){t=null,e.apply(n,i)};clearTimeout(t),t=setTimeout(c,o)}},getWindowSize=function(){function e(){var e=document,o=e.createElement("div"),t;return o.style.height="50000px",e.body.insertBefore(o,e.body.firstChild),t=e.documentElement.clientHeight>49e3,e.body.removeChild(o),t}var o=document.documentElement,t=o&&0===o.clientHeight,n=document.body;return"number"==typeof document.clientWidth?function(){return{width:document.clientWidth,height:document.clientHeight}}:t||e()?function(){return{width:n.clientWidth,height:n.clientHeight}}:function(){return{width:o.clientWidth,height:o.clientHeight}}}(),posY=0,screenY=getWindowSize().height,porcentaje=0,position="center",fotos,contador=0,checkDimensions=function(e){fotos[e].image.height<fotos[e].offsetHeight?console.log("The image "+fotos[e].url+" ("+fotos[e].image.height+"px) is too short for that container ("+fotos[e].offsetHeight+"px)."):(console.log("It's ok"),fotos[e].diferencia=-(fotos[e].image.height-fotos[e].offsetHeight))},animateParallax=function(){posY=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;for(var e=0;e<fotos.length;e++)position=fotos[e].image.height>fotos[e].offsetHeight&&posY+screenY>fotos[e].offsetTop?calcParallax(fotos[e]):"center",fotos[e].style.backgroundPosition="center "+position+"px";contador++,console.log("Contador: "+contador)};window.onresize=function(){screenY=getWindowSize().height},window.onload=function(){fotos=document.getElementsByClassName("paraxify");for(var e=0;e<fotos.length;e++)fotos[e].url=window.getComputedStyle(fotos[e],!1).backgroundImage.replace(/url\((['"])?(.*?)\1\)/gi,"$2").split(",")[0],fotos[e].image=new Image,fotos[e].image.onload=setTimeout("checkDimensions("+e+")",0),fotos[e].image.src=fotos[e].url,console.log(fotos[e].image.height);window.onscroll=debounce(animateParallax,10)};